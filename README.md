# Набор ролей для централизованного управления RouterOS #

----------
В данном репозитории содержатся примеры ролей для администрирования RouterOS, все предоставляется как есть. Используйте на свой страх и риск ;)

**Не используйте эти примеры без проверки и редактирования!
Внутри некоторых ролей содержаться логины, пароли, snmp community и прочие критичные данные. Обязательно измените их!**


**Рекомендации к использованию:**
----------

- Создать в системе не привилегированного пользователя, например, mikroansible ` adduser mikroansible`
- Стать этим пользователем `su - mikroansible`
- Создать пару RSA ключей `ssh-keygen`
- Установить pwgen `apt-get install pwgen` (требуется некоторыми ролями)
- Настроить параметры SSH клиента файл ~/.ssh/config


----------    
    Host * 
    ServerAliveInterval 4
    ServerAliveCountMax 5
    ConnectTimeout 10
    NumberOfPasswordPrompts 0
    StrictHostKeyChecking yes

----------

- Добавить роутеры под управление Anbsibe - создать на роутерах учетную запись для ansible и прописать публичный ключ ключ. Для этого подготовлено несколько ролей.

	roles/add-to-ansible - Просто создаёт пользователя на роутере. Нужно отредактировать переменные этой роли и указать какого пользователя и с каким ключем создавать.
	
	roles/init - Обновить и создать пользователя. Если версия ROS < 6.31, то будет выполнено обнровление до последней версии (через /system packages), обновлена firmware и добавлены пользователи.


----------
**Чтобы не возникало непонятных ситуаций с подключением к оборудованию рекомендую детально ознакомится с опциями ssh клиента**

`NumberOfPasswordPrompts` и `StrictHostKeyChecking`

----------

Что делает та или иная роль понятно из названия.

Некоторые роли снабжены собственным README.

